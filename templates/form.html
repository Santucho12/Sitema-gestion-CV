<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario Completo - Postulantes</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />

</head>

<body>
    <div class="container">
        <h1>¿Te gustaría formar parte del equipo de Boston?</h1>

        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul class="flashes">
            {% for message in messages %}
            <li class="{% if '✅' in message %}success{% else %}error{% endif %}">
                {{ message }}
            </li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}

        <form action="/submit" method="POST" enctype="multipart/form-data">

            <!-- Datos personales (Postulantes) -->
            <div class="form-group">
                <label for="nombre">Nombre <span style="color:red">*</span></label>
                <input type="text" id="nombre" name="nombre" maxlength="100" required pattern="^[A-Za-z\s]+$" title="Solo letras (sin acentos) y espacios" />
            </div>
            <div class="form-group">
                <label for="apellido">Apellido <span style="color:red">*</span></label>
                <input type="text" id="apellido" name="apellido" maxlength="100" required pattern="^[A-Za-z\s]+$" title="Solo letras (sin acentos) y espacios" />
            </div>
            <div class="form-group">
                <label for="sexo">Sexo <span style="color:red">*</span></label>
                <select id="sexo" name="sexo" required>
                    <option value="">Seleccione...</option>
                    <option value="Masculino">Masculino</option>
                    <option value="Femenino">Femenino</option>
                    <option value="Otro">Otro</option>
                </select>
            </div>
            <div class="form-group">
                <label for="fecha_nacimiento">Fecha de nacimiento <span style="color:red">*</span></label>
                <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" required placeholder="dd/mm/aaaa" pattern="\d{4}-\d{2}-\d{2}" />
            </div>
            <div class="form-group">
                <label for="direccion">Dirección <span style="color:red">*</span></label>
                <textarea id="direccion" name="direccion" required minlength="5" title="Debe ingresar al menos 5 caracteres"></textarea>
            </div>
            <div class="form-group">
                <label for="estado_civil">Estado Civil <span style="color:red">*</span></label>
                <select id="estado_civil" name="estado_civil" required>
                    <option value="">Seleccione...</option>
                    <option value="Soltero/a">Soltero/a</option>
                    <option value="Casado/a">Casado/a</option>
                    <option value="NoDecirlo">Prefiero no decirlo</option>
                </select>
            </div>
            <div class="form-group">
                <label for="disponibilidad_horaria">Disponibilidad horaria <span style="color:red">*</span></label>
                <select id="disponibilidad_horaria" name="disponibilidad_horaria" required>
                    <option value="">Seleccione...</option>
                    <option value="Full time">Full time</option>
                    <option value="Part time">Part time</option>
                    <option value="Mañana">Mañana</option>
                    <option value="Tarde">Tarde</option>
                    <option value="Actualmente trabajando">Actualmente trabajando</option>
                </select>
            </div>

            <!-- Formación Académica (formacion) -->
            <fieldset>
                <legend>Formación Académica</legend>
                <div class="form-group">
                    <label for="tipo_formacion">Tipo de formación</label>
                    <select id="tipo_formacion" name="tipo_formacion" required>
                        <option value="Primaria">Primaria</option>
                        <option value="Secundaria">Secundaria</option>
                        <option value="Terciaria">Terciaria</option>
                        <option value="Universitaria">Universitaria</option>
                    </select>
                </div>
            </fieldset>

            <!-- Curso de Manipulación de Alimentos -->
            <fieldset>
                <legend>Curso de Manipulación de Alimentos</legend>
                <div class="form-group">
                    <label><input type="checkbox" id="curso_manipulacion_alimentos" name="curso_manipulacion_alimentos" /> Realizó el curso de manipulación de alimentos</label>
                </div>
            </fieldset>
             <!-- Experiencias previas) -->
            <fieldset>
                <legend>Experiencia</legend>
                <div class="form-group">
                    <label><input type="checkbox" name="atencion_publico" /> Atención al público</label>
                </div>
                <div class="form-group">
                    <label><input type="checkbox" name="experiencia_administrativa" /> Experiencia administrativa</label>
                </div>
                <div class="form-group">
                    <label><input type="checkbox" name="experiencia_reparto" /> Experiencia en reparto</label>
                </div>
            </fieldset>
            <!-- Experiencia en Panadería (ExperienciaPanaderia) -->
            <fieldset>
                <legend>¿Trabajaste en Panadería?</legend>
                <div class="form-group">
                    <label><input type="checkbox" name="experiencia_produccion" /> Experiencia en producción</label>
                </div>
                <div class="form-group">
                    <label for="conocimientos_produccion">Conocimientos de producción</label>
                    <textarea id="conocimientos_produccion" name="conocimientos_produccion" placeholder="Ejemplo: producción de panificados y factura..."></textarea>
                </div>
            </fieldset>

            <!-- Conocimientos de Excel (ConocimientosExcel) -->
            <fieldset>
                <legend>Conocimientos de Excel</legend>
                <div class="form-group">
                    <label for="nivel_excel">Nivel</label>
                    <select id="nivel_excel" name="nivel_excel">
                        <option value="Ninguno">Ninguno</option>
                        <option value="Básico">Básico</option>
                        <option value="Intermedio">Intermedio</option>
                        <option value="Avanzado">Avanzado</option>
                        <option value="Experto">Experto</option>
                    </select>
                </div>
            </fieldset>

            <!-- Movilidad -->
            <fieldset>
                <legend>Movilidad</legend>
                <div class="form-group">
                    <label><input type="checkbox" name="licencia_auto" /> Licencia de auto</label>
                </div>
                <div class="form-group">
                    <label><input type="checkbox" name="tiene_movilidad_propia" /> Movilidad propia</label>
                </div>
            </fieldset>

            <!-- Currículum y Foto (obligatorios) -->
            <fieldset>
                <legend>Currículum y Foto <span style="color:red">*</span></legend>
                <!-- Subida de CV -->
                <input type="file" id="cv" name="cv" accept=".pdf,.doc,.docx" required style="display:none"
                    onchange="updateFileName(this, 'cv-info', 'cv-btn')" />
                <button type="button" class="submit-btn" id="cv-btn"
                    onclick="document.getElementById('cv').click()" required>
                    Agregar Currículum
                    <span id="cv-info"></span>
                </button>
                <!-- Subida de Foto -->
                <input type="file" id="foto_postulante" name="foto_postulante" accept="image/*" required style="display:none"
                    onchange="updateFileName(this, 'foto-info', 'foto-btn')" />
                <button type="button" class="submit-btn" id="foto-btn"
                    onclick="document.getElementById('foto_postulante').click()" required style="margin-top: 1em;">
                    Agregar Foto Personal
                    <span id="foto-info"></span>
                </button>
            </fieldset>

            <button type="submit" class="btn">Enviar Formulario</button>
        </form>
    </div>

    <script>
        function updateFileName(input, infoSpanId, btnId) {
            const infoSpan = document.getElementById(infoSpanId);
            const btn = document.getElementById(btnId);
            if (input.files.length > 0) {
                const fileName = input.files[0].name;
                btn.classList.add('cv-cargado');
                infoSpan.textContent = `✅ `;
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach((input, index) => {
                input.style.animationDelay = `${index * 0.1}s`;
                input.classList.add('fadeIn');
            });
        });

        // Validación personalizada al enviar el formulario
        document.querySelector('form').addEventListener('submit', function(e) {
            let valid = true;
            const nombre = document.getElementById('nombre');
            const apellido = document.getElementById('apellido');
            const direccion = document.getElementById('direccion');
            // Solo letras (sin acentos) y espacios
            const regex = /^[A-Za-z\s]+$/;
            if (!regex.test(nombre.value)) {
                alert('El nombre solo puede contener letras (sin acentos) y espacios.');
                nombre.focus();
                valid = false;
            }
            if (!regex.test(apellido.value)) {
                alert('El apellido solo puede contener letras (sin acentos) y espacios.');
                apellido.focus();
                valid = false;
            }
            if (direccion.value.length < 5) {
                alert('La dirección debe tener al menos 5 caracteres.');
                direccion.focus();
                valid = false;
            }
            if (!valid) {
                e.preventDefault();
            }
        });
    </script>
</body>

</html>
